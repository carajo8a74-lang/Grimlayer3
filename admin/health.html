
<!doctype html>
<meta charset="utf-8">
<title>Admin Health Check</title>
<style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:#0f1115;color:#e6edf3;padding:24px}code{background:#171a21;padding:2px 6px;border-radius:4px}</style>
<h1>Admin Health Check</h1>
<p>Use this to verify the two things the CMS needs:</p>
<ol>
  <li><strong>config.yml</strong> is reachable (200)</li>
  <li><strong>Identity endpoint</strong> responds (should be 200 after login)</li>
</ol>
<div id="out"></div>
<script>
(async () => {
  const out = document.getElementById('out');
  const row = (label, code) => `<p><strong>${label}:</strong> <code>${code}</code></p>`;
  try {
    const r1 = await fetch('./config.yml', {cache:'no-store'});
    out.innerHTML += row('Fetch config.yml status', r1.status);
  } catch(e){
    out.innerHTML += row('Fetch config.yml error', e.message);
  }
  try {
    const r2 = await fetch('/.netlify/identity/user', {credentials:'include'});
    out.innerHTML += row('Identity endpoint status', r2.status);
  } catch(e){
    out.innerHTML += row('Identity endpoint error', e.message);
  }
})();
</script>
